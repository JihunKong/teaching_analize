(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{168:function(e,t,s){Promise.resolve().then(s.bind(s,3590))},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},5775:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let n=s(7043);s(7437),s(2265);let a=n._(s(5602));function r(e,t){var s;let n={loading:e=>{let{error:t,isLoading:s,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let r={...n,...t};return(0,a.default)({...r,modules:null==(s=r.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=s(8993);function a(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return s}},5602:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let n=s(7437),a=s(2265),r=s(1523),l=s(49);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},s=(0,a.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,n.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(l.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(s,{...e})]}):(0,n.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(s,{...e})});return(0,n.jsx)(a.Suspense,{fallback:i,children:o})}return c.displayName="LoadableComponent",c}},49:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return r}});let n=s(7437),a=s(544);function r(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=(0,a.getExpectedRequestStore)("next/dynamic css"),r=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));r.push(...t)}}return 0===r.length?null:(0,n.jsx)(n.Fragment,{children:r.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},3590:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(7437),a=s(2265),r=s(9376),l=s(5775);function i(e){var t;let{analysis:s,selected:a,onToggle:r,frameworkColor:l="#667eea"}=e;return(0,n.jsxs)("div",{className:"card analysis-card ".concat(a?"selected":""),style:{cursor:"pointer",border:a?"2px solid ".concat(l):"1px solid #ddd",transition:"all 0.3s ease"},onClick:e=>{e.preventDefault(),r(s.analysis_id)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),r(s.analysis_id))},tabIndex:0,role:"button","aria-pressed":a,"aria-label":"".concat(s.framework_name," 분석 ").concat(a?"선택됨":"선택 안됨"),children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",gap:"12px"},children:[(0,n.jsx)("input",{type:"checkbox",checked:a,onChange:()=>{},style:{width:"20px",height:"20px",accentColor:l},"aria-hidden":"true"}),(0,n.jsx)("h4",{style:{margin:0,flex:1,color:"#333"},children:s.framework_name}),(0,n.jsx)("span",{style:{backgroundColor:l,color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.5px"},children:s.framework})]}),(0,n.jsxs)("div",{className:"analysis-stats",style:{marginBottom:"12px"},children:[(0,n.jsxs)("span",{children:["\uD83D\uDCC5 ",new Date(s.created_at).toLocaleDateString("ko-KR")]}),(0,n.jsxs)("span",{children:["\uD83D\uDCDD ",s.character_count.toLocaleString(),"자"]}),(0,n.jsxs)("span",{children:["\uD83D\uDCCA ",(null===(t=s.word_count)||void 0===t?void 0:t.toLocaleString())||"N/A","단어"]})]}),(0,n.jsxs)("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"8px",padding:"12px",fontSize:"0.9rem",lineHeight:"1.5",maxHeight:"120px",overflow:"hidden",position:"relative"},children:[s.analysis.length>200?"".concat(s.analysis.substring(0,200),"..."):s.analysis,s.analysis.length>200&&(0,n.jsx)("div",{style:{position:"absolute",bottom:0,right:0,background:"linear-gradient(to right, transparent, #f8f9fa 70%)",padding:"0 8px",fontSize:"0.8rem",color:"#666"},children:"더보기"})]}),s.metadata&&(0,n.jsxs)("div",{style:{marginTop:"10px",fontSize:"0.8rem",color:"#666",display:"flex",gap:"15px",flexWrap:"wrap"},children:[s.metadata.video_id&&(0,n.jsxs)("span",{children:["\uD83C\uDFAC 영상: ",s.metadata.video_id]}),void 0!==s.metadata.temperature&&(0,n.jsxs)("span",{children:["\uD83C\uDF21️ 온도: ",s.metadata.temperature]}),s.metadata.language&&(0,n.jsxs)("span",{children:["\uD83C\uDF10 언어: ",s.metadata.language]})]}),a&&(0,n.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px",backgroundColor:l,color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:"✓"})]})}function o(e){let{frameworks:t,selectedFrameworks:s,configuration:r,onConfigurationChange:l}=e,[i,o]=(0,a.useState)("basic"),d=e=>{l({...r,...e})},c=(e,t)=>{d({frameworkWeights:{...r.frameworkWeights,[e]:t}})},p=e=>e<=.5?"매우 낮음":e<=.8?"낮음":e<=1.2?"보통":e<=2?"높음":"매우 높음",u=t.filter(e=>s.includes(e.id)),m=e=>{o(i===e?null:e)};return(0,n.jsxs)("div",{className:"config-panel",children:[(0,n.jsx)("h3",{style:{marginBottom:"25px",color:"#333"},children:"⚙️ 보고서 설정"}),(0,n.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",padding:"10px 0"},onClick:()=>m("basic"),children:[(0,n.jsx)("h4",{style:{margin:0},children:"\uD83D\uDCDD 기본 설정"}),(0,n.jsx)("span",{style:{fontSize:"1.2rem"},children:"basic"===i?"▼":"▶"})]}),"basic"===i&&(0,n.jsxs)("div",{style:{paddingTop:"15px",borderTop:"1px solid #e9ecef"},children:[(0,n.jsxs)("div",{className:"grid grid-2",style:{marginBottom:"15px"},children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"보고서 제목"}),(0,n.jsx)("input",{type:"text",className:"form-input",value:r.title,onChange:e=>d({title:e.target.value}),placeholder:"보고서 제목을 입력하세요"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"보고서 유형"}),(0,n.jsxs)("select",{className:"form-select",value:r.type,onChange:e=>d({type:e.target.value}),children:[(0,n.jsx)("option",{value:"detailed",children:"상세 분석"}),(0,n.jsx)("option",{value:"comparison",children:"비교 분석"}),(0,n.jsx)("option",{value:"summary",children:"요약 분석"})]})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{className:"form-label",children:[(0,n.jsx)("input",{type:"checkbox",checked:r.includeRecommendations,onChange:e=>d({includeRecommendations:e.target.checked}),style:{marginRight:"8px"}}),"개선 권장사항 포함"]}),(0,n.jsx)("small",{style:{color:"#666",display:"block",marginTop:"5px"},children:"AI가 분석을 바탕으로 구체적인 개선 방안을 제안합니다."})]})]})]}),u.length>1&&(0,n.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",padding:"10px 0"},onClick:()=>m("weights"),children:[(0,n.jsx)("h4",{style:{margin:0},children:"⚖️ 프레임워크 가중치"}),(0,n.jsx)("span",{style:{fontSize:"1.2rem"},children:"weights"===i?"▼":"▶"})]}),"weights"===i&&(0,n.jsxs)("div",{style:{paddingTop:"15px",borderTop:"1px solid #e9ecef"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,n.jsx)("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:"각 프레임워크의 중요도를 조정하여 맞춤형 보고서를 생성하세요."}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>{let e={};s.forEach(t=>{e[t]=1}),d({frameworkWeights:e})},style:{padding:"6px 12px",fontSize:"0.8rem"},children:"초기화"})]}),(0,n.jsx)("div",{className:"grid",children:u.map(e=>{let t=r.frameworkWeights[e.id]||1;return(0,n.jsxs)("div",{className:"card",style:{padding:"15px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,n.jsx)("span",{style:{fontWeight:"bold"},children:e.name}),(0,n.jsx)("span",{className:"weight-display",style:{backgroundColor:"#667eea",color:"white",padding:"4px 8px",borderRadius:"8px",fontSize:"0.9rem"},children:t.toFixed(1)})]}),(0,n.jsx)("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:t,onChange:t=>c(e.id,parseFloat(t.target.value)),style:{width:"100%",marginBottom:"8px"},"aria-label":"".concat(e.name," 가중치")}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#666"},children:[(0,n.jsx)("span",{children:"낮음 (0.1)"}),(0,n.jsx)("span",{style:{fontWeight:"bold"},children:p(t)}),(0,n.jsx)("span",{children:"높음 (3.0)"})]}),(0,n.jsx)("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"8px",fontStyle:"italic"},children:e.description})]},e.id)})})]})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",padding:"10px 0"},onClick:()=>m("advanced"),children:[(0,n.jsx)("h4",{style:{margin:0},children:"\uD83D\uDD27 고급 설정"}),(0,n.jsx)("span",{style:{fontSize:"1.2rem"},children:"advanced"===i?"▼":"▶"})]}),"advanced"===i&&(0,n.jsx)("div",{style:{paddingTop:"15px",borderTop:"1px solid #e9ecef"},children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"출력 형식"}),(0,n.jsxs)("select",{className:"form-select",value:r.format,onChange:e=>d({format:e.target.value}),children:[(0,n.jsx)("option",{value:"html",children:"HTML (웹 브라우저용)"}),(0,n.jsx)("option",{value:"pdf",children:"PDF (인쇄용) - 개발 중"})]}),(0,n.jsx)("small",{style:{color:"#666",marginTop:"5px",display:"block"},children:"HTML 형식은 인터랙티브 차트와 반응형 디자인을 지원합니다."})]})})]}),(0,n.jsxs)("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#e8f4fd",border:"1px solid #b3d7ff",borderRadius:"8px"},children:[(0,n.jsx)("h5",{style:{margin:"0 0 10px 0",color:"#0c5460"},children:"\uD83D\uDCCA 설정 요약"}),(0,n.jsxs)("ul",{style:{margin:0,paddingLeft:"20px",color:"#0c5460",fontSize:"0.9rem"},children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"제목:"})," ",r.title]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"유형:"})," ","detailed"===r.type?"상세 분석":"comparison"===r.type?"비교 분석":"요약 분석"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"선택된 프레임워크:"})," ",u.length,"개"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"권장사항:"})," ",r.includeRecommendations?"포함":"제외"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"형식:"})," ",r.format.toUpperCase()]})]})]})]})}function d(e){let{reportHtml:t,title:s,onClose:r,onDownload:l}=e,[i,o]=(0,a.useState)("embedded");return(0,n.jsxs)("div",{className:"comprehensive-report-viewer",children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px 20px",background:"#f8f9fa",borderBottom:"1px solid #dee2e6",borderRadius:"10px 10px 0 0"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{style:{margin:0,color:"#333"},children:s}),(0,n.jsxs)("small",{style:{color:"#666"},children:["생성일: ",new Date().toLocaleDateString("ko-KR")]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>o("embedded"===i?"fullscreen":"embedded"),style:{padding:"8px 15px",fontSize:"0.9rem"},children:"embedded"===i?"전체화면":"임베디드"}),(0,n.jsx)("button",{className:"btn",onClick:()=>{let e=window.open("","_blank");e&&(e.document.write(t),e.document.close())},style:{padding:"8px 15px",fontSize:"0.9rem"},children:"새 탭에서 열기"}),(0,n.jsx)("button",{className:"btn",onClick:()=>{let e=new Blob([t],{type:"text/html"}),n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download="".concat(s.replace(/[^a-zA-Z0-9]/g,"_"),"_").concat(new Date().toISOString().split("T")[0],".html"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n),l&&l()},style:{padding:"8px 15px",fontSize:"0.9rem"},children:"다운로드"}),r&&(0,n.jsx)("button",{className:"btn btn-secondary",onClick:r,style:{padding:"8px 15px",fontSize:"0.9rem"},children:"닫기"})]})]}),(0,n.jsx)("div",{style:{height:"fullscreen"===i?"80vh":"600px",border:"1px solid #dee2e6",borderTop:"none",borderRadius:"0 0 10px 10px",overflow:"hidden"},children:(0,n.jsx)("iframe",{srcDoc:t,style:{width:"100%",height:"100%",border:"none",background:"white"},title:s,sandbox:"allow-scripts allow-same-origin"})}),(0,n.jsxs)("div",{style:{padding:"15px 20px",background:"#f8f9fa",borderTop:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.9rem",color:"#666"},children:[(0,n.jsxs)("div",{children:["보고서 크기: ",(new Blob([t]).size/1024).toFixed(1)," KB"]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{padding:"6px 12px",fontSize:"0.8rem"},children:"인쇄"}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>{navigator.clipboard.writeText(window.location.href).then(()=>alert("링크가 클립보드에 복사되었습니다.")).catch(()=>alert("링크 복사에 실패했습니다."))},style:{padding:"6px 12px",fontSize:"0.8rem"},children:"링크 복사"})]})]})]})}function c(){var e;let t=(0,r.useSearchParams)(),[s,l]=(0,a.useState)([]),[c,p]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[x,h]=(0,a.useState)(!0),[g,f]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[w,C]=(0,a.useState)("date"),[k,S]=(0,a.useState)("desc"),[_,N]=(0,a.useState)({title:"종합 교육 분석 보고서",type:"detailed",includeRecommendations:!0,frameworkWeights:{},format:"html"}),[D,F]=(0,a.useState)(!1),[B,R]=(0,a.useState)(null),[E,T]=(0,a.useState)([]),[z,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t.get("analysis_id")||L()},[]),(0,a.useEffect)(()=>{if(u.length>0){let e={};u.forEach(t=>{e[t.id]=1}),N(t=>({...t,frameworkWeights:e}))}},[u]);let L=async()=>{h(!0);try{let r="http://localhost:8080",i=await fetch("".concat(r,"/api/analyze/frameworks"));if(i.ok){let e=await i.json();m(e.frameworks||[])}let o=[],d=t.get("analysis_id");if(d)try{console.log("Fetching analysis from URL parameter:",d);let t=await fetch("".concat(r,"/api/analyze/").concat(d));if(t.ok){let r=await t.json();if(console.log("Analysis data received:",r),"completed"===r.status&&r.result){var e,s,n,a;let t={analysis_id:d,framework:r.result.evaluation_type||"cbil_comprehensive",framework_name:"CBIL 종합 분석",analysis:JSON.stringify(r.result,null,2),character_count:JSON.stringify(r.result).length,word_count:(null===(s=r.result.matrix_analysis)||void 0===s?void 0:null===(e=s.statistics)||void 0===e?void 0:e.total_utterances)||0,created_at:r.created_at||new Date().toISOString(),metadata:{video_url:null===(a=r.result.matrix_analysis)||void 0===a?void 0:null===(n=a.statistics)||void 0===n?void 0:n.video_url,evaluation_type:r.result.evaluation_type,from_workflow:!0}};o.push(t),p([d]),console.log("Successfully loaded analysis from workflow")}}else console.error("Failed to fetch analysis:",t.status)}catch(e){console.error("Error fetching analysis from URL:",e)}let c=sessionStorage.getItem("parallelAnalysisResults");if(c)try{let{results:e,frameworks:t}=JSON.parse(c),s=Object.entries(e).map(e=>{let[s,n]=e;if(n&&"completed"===n.status&&n.result){let e=t.find(e=>e.id===s);return{analysis_id:n.analysis_id,framework:s,framework_name:(null==e?void 0:e.name)||s,analysis:n.result.analysis,character_count:n.result.character_count,word_count:n.result.word_count||0,created_at:n.result.created_at,metadata:{temperature:.3,parallel:!0}}}return null}).filter(Boolean);o=[...o,...s],s.length>0&&(p(e=>[...e,...s.map(e=>e.analysis_id)]),A(!0)),sessionStorage.removeItem("parallelAnalysisResults")}catch(e){console.error("Error parsing stored results:",e)}l(o)}catch(e){console.error("Error loading data:",e)}finally{h(!1)}},I=s.filter(e=>{let t=!g||e.framework_name.toLowerCase().includes(g.toLowerCase())||e.analysis.toLowerCase().includes(g.toLowerCase()),s=!y||new Date(e.created_at).toISOString().split("T")[0]>=y,n=!b||e.framework===b;return t&&s&&n}).sort((e,t)=>{let s=0;switch(w){case"date":s=new Date(e.created_at).getTime()-new Date(t.created_at).getTime();break;case"framework":s=e.framework_name.localeCompare(t.framework_name);break;case"length":s=e.character_count-t.character_count}return"desc"===k?-s:s}),O=e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},P=async()=>{if(0===c.length){alert("분석을 선택해주세요.");return}F(!0);try{let e=s.filter(e=>c.includes(e.analysis_id)),t=await fetch("".concat("http://localhost:8080","/api/reports/generate/comprehensive"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analyses:e,configuration:_})}),n=await t.json();if(t.ok){let e={job_id:n.job_id||"comp-".concat(Date.now()),status:n.status||"processing",message:n.message||"종합 보고서를 생성하고 있습니다...",progress:0};R(e),M(e.job_id)}else throw Error(n.detail||"Report generation failed")}catch(t){console.error("Error generating comprehensive report:",t);let e={job_id:"mock-".concat(Date.now()),status:"processing",message:"종합 보고서를 생성하고 있습니다...",progress:0};R(e),W(e)}},W=e=>{let t=0,s=setInterval(()=>{if((t+=20*Math.random()+10)>=100){clearInterval(s);let t={...e,status:"completed",message:"종합 보고서가 성공적으로 생성되었습니다.",progress:100,result:{report_html:H(),generated_at:new Date().toISOString()}};R(t),T(e=>[t,...e]),F(!1)}else R(e=>e?{...e,progress:t}:null)},800)},M=async e=>{let t=async()=>{try{let s=await fetch("".concat("http://localhost:8080","/api/reports/status/").concat(e)),n=await s.json();if(R(n),"completed"===n.status||"failed"===n.status){"completed"===n.status&&T(e=>[n,...e]),F(!1);return}setTimeout(t,3e3)}catch(e){console.error("Error checking report status:",e),F(!1)}};setTimeout(t,2e3)},H=()=>"\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>".concat(_.title,'</title>\n        <meta charset="utf-8">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            background: #f5f5f5;\n          }\n          .report-container {\n            max-width: 1200px;\n            margin: 0 auto;\n            background: white;\n            padding: 30px;\n            border-radius: 10px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n          }\n          .header {\n            background: #667eea;\n            color: white;\n            padding: 20px;\n            border-radius: 10px;\n            margin-bottom: 20px;\n          }\n          .section {\n            margin: 20px 0;\n            padding: 20px;\n            border: 1px solid #ddd;\n            border-radius: 5px;\n          }\n          .framework {\n            margin: 15px 0;\n            padding: 15px;\n            background: #f8f9fa;\n            border-radius: 5px;\n          }\n          @media (max-width: 768px) {\n            .report-container {\n              max-width: 100%;\n              padding: 20px;\n            }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="report-container">\n          <div class="header">\n            <h1>').concat(_.title,"</h1>\n            <p>생성일: ").concat(new Date().toLocaleDateString("ko-KR"),'</p>\n          </div>\n          <div class="section">\n            <h2>분석 개요</h2>\n            <p>선택된 ').concat(c.length,'개 분석 결과를 종합한 보고서입니다.</p>\n          </div>\n          <div class="section">\n            <h2>프레임워크별 분석</h2>\n            ').concat(c.map(e=>{var t;let n=s.find(t=>t.analysis_id===e);return n?'\n                <div class="framework">\n                  <h3>'.concat(n.framework_name,"</h3>\n                  <p>가중치: ").concat((null===(t=_.frameworkWeights[n.framework])||void 0===t?void 0:t.toFixed(1))||1,"</p>\n                  <div>").concat(n.analysis.substring(0,500),"...</div>\n                </div>\n              "):""}).join(""),"\n          </div>\n        </div>\n      </body>\n      </html>\n    "),G=e=>{var t;if(null===(t=e.result)||void 0===t?void 0:t.report_html){let t=window.open("","_blank");t&&(t.document.write(e.result.report_html),t.document.close())}},U=t.get("analysis_id");return((0,a.useEffect)(()=>{if(U)return document.body.classList.add("fullscreen-report-mode"),()=>{document.body.classList.remove("fullscreen-report-mode")}},[U]),U)?(0,n.jsx)("div",{className:"fixed inset-0 w-screen h-screen bg-gradient-to-br from-indigo-50 via-white to-emerald-50 m-0 p-0",style:{zIndex:9999},children:(0,n.jsx)("iframe",{src:"/api/reports/html/".concat(U),className:"w-full h-full border-none block",style:{width:"100%",height:"100%",border:"none",display:"block",minWidth:"100%",minHeight:"100%"},title:"분석 보고서"})}):x?(0,n.jsx)("div",{className:"fixed inset-0 w-screen h-screen bg-gradient-to-br from-indigo-50 via-white to-emerald-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"glass-card p-8 rounded-2xl shadow-2xl max-w-md w-full mx-4",children:[(0,n.jsx)("div",{className:"spinner mb-4"}),(0,n.jsx)("p",{className:"text-lg font-medium text-gray-700 text-center",children:"데이터를 불러오는 중..."})]})}):(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"header",children:[(0,n.jsx)("h1",{className:"title",children:"Comprehensive Report Generation"}),(0,n.jsx)("p",{className:"subtitle",children:"Integrate multiple framework analyses into a comprehensive educational report"})]}),z&&(0,n.jsxs)("div",{className:"status status-success mb-8 p-5 rounded-xl bg-green-50 text-green-800 border border-green-200",children:[(0,n.jsx)("strong",{children:"\uD83C\uDF89 Parallel Analysis Complete!"})," ",c.length," framework analyses have been automatically loaded. Adjust settings below and generate your comprehensive report."]}),(0,n.jsxs)("div",{className:"section",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsxs)("h3",{className:"text-xl font-bold text-slate-900 m-0",children:["\uD83D\uDCDA Select Analysis (",c.length,"/",I.length,")"]}),(0,n.jsxs)("div",{className:"flex gap-2.5",children:[(0,n.jsx)("button",{className:"btn-secondary px-4 py-2 text-sm",onClick:()=>{p(I.map(e=>e.analysis_id))},children:"Select All"}),(0,n.jsx)("button",{className:"btn-secondary px-4 py-2 text-sm",onClick:()=>{p([])},children:"Clear Selection"})]})]}),(0,n.jsxs)("div",{className:"grid grid-2 mb-5",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Search"}),(0,n.jsx)("input",{type:"text",className:"form-input",placeholder:"Search framework or content...",value:g,onChange:e=>f(e.target.value)})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Date Filter"}),(0,n.jsx)("input",{type:"date",className:"form-input",value:y,onChange:e=>j(e.target.value)})]})]}),(0,n.jsxs)("div",{className:"grid grid-3",style:{marginBottom:"30px"},children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Framework"}),(0,n.jsxs)("select",{className:"form-select",value:b,onChange:e=>v(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"All Frameworks"}),u.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Sort By"}),(0,n.jsxs)("select",{className:"form-select",value:w,onChange:e=>C(e.target.value),children:[(0,n.jsx)("option",{value:"date",children:"Date"}),(0,n.jsx)("option",{value:"framework",children:"Framework"}),(0,n.jsx)("option",{value:"length",children:"Length"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Order"}),(0,n.jsxs)("select",{className:"form-select",value:k,onChange:e=>S(e.target.value),children:[(0,n.jsx)("option",{value:"desc",children:"Descending"}),(0,n.jsx)("option",{value:"asc",children:"Ascending"})]})]})]}),(0,n.jsx)("div",{className:"grid grid-2",children:I.map(e=>(0,n.jsx)(i,{analysis:e,selected:c.includes(e.analysis_id),onToggle:O},e.analysis_id))}),0===I.length&&(0,n.jsx)("div",{style:{textAlign:"center",padding:"60px",color:"#64748B",background:"#F8FAFC",borderRadius:"12px",border:"2px dashed #E2E8F0"},children:"No analysis results found matching your criteria."})]}),c.length>0&&(0,n.jsx)("div",{className:"section",style:{marginTop:"40px"},children:(0,n.jsx)(o,{frameworks:u,selectedFrameworks:Array.from(new Set(c.map(e=>{var t;return null===(t=s.find(t=>t.analysis_id===e))||void 0===t?void 0:t.framework}).filter(Boolean))),configuration:_,onConfigurationChange:N})}),(0,n.jsxs)("div",{className:"section",style:{marginTop:"40px",textAlign:"center"},children:[(0,n.jsx)("h3",{style:{fontSize:"24px",fontWeight:"700",color:"#0F172A",marginBottom:"20px"},children:"\uD83D\uDE80 Generate Report"}),(0,n.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,n.jsx)("button",{className:"btn-primary btn-large",onClick:P,disabled:0===c.length||D,style:{minWidth:"250px"},children:D?"Generating Report...":"Generate Comprehensive Report"}),(0,n.jsxs)("div",{style:{marginTop:"15px",fontSize:"14px",color:"#64748B"},children:[c.length," analyses selected"]})]}),B&&(0,n.jsxs)("div",{style:{padding:"30px",backgroundColor:"#F8FAFC",borderRadius:"16px",border:"1px solid #E2E8F0",maxWidth:"600px",margin:"0 auto"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,n.jsx)("strong",{style:{color:"#0F172A"},children:"Generation Status"}),(0,n.jsxs)("span",{style:{padding:"4px 12px",borderRadius:"9999px",fontSize:"12px",fontWeight:"600",backgroundColor:"completed"===B.status?"#DCFCE7":"failed"===B.status?"#FEE2E2":"#FEF3C7",color:"completed"===B.status?"#166534":"failed"===B.status?"#991B1B":"#92400E"},children:["pending"===B.status&&"Pending","processing"===B.status&&"Processing","completed"===B.status&&"Completed","failed"===B.status&&"Failed"]})]}),"number"==typeof B.progress&&(0,n.jsx)("div",{style:{height:"8px",background:"#E2E8F0",borderRadius:"4px",overflow:"hidden",marginBottom:"15px"},children:(0,n.jsx)("div",{style:{width:"".concat(B.progress,"%"),height:"100%",background:"linear-gradient(90deg, #2563EB, #4F46E5)",transition:"width 0.3s ease"}})}),(0,n.jsx)("p",{style:{margin:0,color:"#64748B",fontSize:"14px"},children:B.message}),"completed"===B.status&&(null===(e=B.result)||void 0===e?void 0:e.report_html)&&(0,n.jsx)("div",{style:{marginTop:"25px"},children:(0,n.jsx)(d,{reportHtml:B.result.report_html,title:_.title,onClose:()=>R(null)})})]})]}),E.length>0&&(0,n.jsxs)("div",{className:"section",style:{marginTop:"40px"},children:[(0,n.jsx)("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#0F172A",marginBottom:"20px"},children:"\uD83D\uDCCB Generated Reports"}),(0,n.jsx)("div",{className:"grid grid-2",children:E.map((e,t)=>{var s;return(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,n.jsxs)("h4",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#0F172A"},children:["Comprehensive Report #",E.length-t]}),(0,n.jsx)("span",{style:{backgroundColor:"completed"===e.status?"#DCFCE7":"#FEE2E2",color:"completed"===e.status?"#166534":"#991B1B",padding:"4px 10px",borderRadius:"9999px",fontSize:"12px",fontWeight:"600"},children:"completed"===e.status?"Success":"Failed"})]}),(0,n.jsxs)("div",{style:{fontSize:"14px",color:"#64748B",marginBottom:"20px"},children:["Generated: ",new Date((null===(s=e.result)||void 0===s?void 0:s.generated_at)||"").toLocaleDateString()]}),(0,n.jsx)("div",{style:{textAlign:"center"},children:(0,n.jsx)("button",{className:"btn-secondary",onClick:()=>G(e),disabled:"completed"!==e.status,style:{width:"100%"},children:"\uD83D\uDCC4 View in New Tab"})})]},e.job_id)})})]}),(0,n.jsxs)("div",{className:"section",style:{marginTop:"40px",background:"#F8FAFC"},children:[(0,n.jsx)("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#0F172A",marginBottom:"20px"},children:"\uD83D\uDCA1 Help & Tips"}),(0,n.jsxs)("div",{className:"grid grid-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#0F172A",marginBottom:"10px"},children:"\uD83C\uDFAF Report Types"}),(0,n.jsxs)("ul",{style:{marginLeft:"20px",color:"#64748B",fontSize:"14px",lineHeight:"1.8"},children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Detailed:"})," Includes full analysis for each framework"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Comparison:"})," Focuses on comparing frameworks"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Summary:"})," Concise overview of key insights"]})]}),(0,n.jsxs)("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #E2E8F0",fontSize:"13px",color:"#64748B"},children:[(0,n.jsx)("strong",{children:"\uD83D\uDCA1 Tip:"})," Running parallel analysis on the ",(0,n.jsx)("a",{href:"/analysis",style:{color:"#2563EB",textDecoration:"none",fontWeight:"500"},children:"Analysis Page"})," automatically loads all framework results here."]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#0F172A",marginBottom:"10px"},children:"⚖️ Weight Settings"}),(0,n.jsxs)("ul",{style:{marginLeft:"20px",color:"#64748B",fontSize:"14px",lineHeight:"1.8"},children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"1.0:"})," Default importance (Recommended)"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"0.1-0.9:"})," Lower importance"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"1.1-3.0:"})," Higher importance"]})]}),(0,n.jsxs)("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #E2E8F0",fontSize:"13px",color:"#64748B"},children:[(0,n.jsx)("strong",{children:"\uD83D\uDCCA Example:"})," To focus on CBIL analysis, set CBIL weight to 2.0 and others to 0.8."]})]})]})]})]})}let p=s.n(l)()(()=>Promise.resolve(c),{ssr:!1,loading:()=>(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"loading",children:[(0,n.jsx)("div",{className:"spinner"}),(0,n.jsx)("p",{children:"Loading..."})]})})});function u(){return(0,n.jsx)(p,{})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=168)}),_N_E=e.O()}]);